<!DOCTYPE html>
<head>
  <meta charset="utf-8">

  <!-- Bootstrap CSS CDN-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootrap JavaScript CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <a href="https://www.flaticon.com/free-icons/dna" title="dna icons"></a>

  <!-- Vega Embed CDN -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
	<script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
	<script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <script src="https://vega.github.io/datalib/datalib.min.js"></script>

  <!-- jquery CDN -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>

<body>

  <!-- Header Container -->
  <div class="container">
    <span style="width:100%; text-align:center; word-wrap:break-word; display:block">
      <br>
      <h1>Visualizing the Human Genome</h1>
      <br>
      <h3>UC Berkeley School of Information</h3>
      <br>
      <h4>Spring 2022 - W209 Data Visualization - Final Project</h4>
    </span>
  </div>


  <!-- Introduction Container -->
  <div class="container">
    <br><hr><br>
    <div class="row">
      <h3>Introduction</h3>
      <br><br>
      <span style="width:100%; word-wrap:break-word; display:inline-block;">
        <a href="https://www.genome.gov/human-genome-project">The Human Genome Project</a>
        was completed in 2003 which ushered in the modern genomics era by sequencing an entire
        human genome for the very first time. In the following two decades, advances
        in high-throughput genetic sequencing technologies have made DNA
        sequencing faster, cheaper, and widely available. This has lead to a proliferation
        of genomic "big data" and the availability of large-scale public databases
        of detailed genomic information.
        <br><br>
        The human genome consists of 23 chromosome pairs that include around 20,000
        genes and over 6 billion base pairs in total DNA length. Given the challenging scale and
        complexity of genomic data, this project is an attempt to create an interactive
        educational visualization of the human genome using real genomic data.
        In Part 1 we will explore the genome's structure and its components and in
        Part 2 we will look at gene expression and follow a selected gene's path through the
        <a href="https://en.wikipedia.org/wiki/Central_dogma_of_molecular_biology">
        Central Dogma of Molecular Biology</a> as it gets transcribed from DNA into RNA
        and then translated into a Protein with a specific bodily function:
      </span>
    </div>
    <div class="row">
      <span style="width:100%; text-align:center;  word-wrap:break-word; display:inline-block;">
        <br>
        <!-- <h4>The Central Dogma of Molecular Biology</h4> -->
        <img src="https://i.pinimg.com/originals/0e/76/7b/0e767b3858116480884580f505b35262.png" width="750">
        <br>
      </span>
    </div>
  </div>


  <!-- Introduction to Genome Video -->
  <div class="container">
    <br><hr><br>
    <h2>Part 1: The Genome</h2>
    <br>
    <div class="charts text-center">
      <iframe width="790" height="444" src="https://www.youtube.com/embed/3fr4jBFs25s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>



  <!-- Part 1 Container: Genome Summary -->
  <div class="container">
    <br><hr><br>
    <div class="row">
      <h3>The Genome Consists of 23 Pairs of Chromosomes</h3>
      <a href="templates/definitions_page_consolidated" style="font-size:22px;">Definitions</a>
    </div>
    <div class="row">
      <!-- Visualization 1: Genome Summary -->
      <div class="charts text-center">
        <iframe id="tableau_1" width="1000px" height="827px"></iframe>
      </div>
    </div>
  </div>



  <!-- Part 2 Container: Chromosome Overview -->
  <div class="container">
    <br><hr><br>
    <div class="row">
      <h3>Within each Chromosome there are regions of DNA called Genes</h3>
      <a href="/definitions" style="font-size:22px;">Definitions for Part 2</a>
    </div>
    <div class="row">
      <!-- Visualization 1: Genome Summary -->
      <div class="charts text-center">
        <iframe id="tableau_2" width="1000px" height="827px" src="https://public.tableau.com/views/ChromosomeOverview/ChromosomeOverview?:language=en-US&:display_count=n&:origin=viz_share_link:showVizHome=no&:embed=true"></iframe>
      </div>
    </div>
  </div>


  <!-- Render Gene Composition by Genome Chart -->
  <div class="container">
    <br><hr><br>
    <div class="row">
      <h3>Most of the DNA in the Genome is not actually contained in a Gene</h3>
    </div>
    <br><br>
    <div class="row">
      <br><br><br><br>
      <div class="charts text-center">
        <div class="row"><div id="gene_composition_genome"></div></div>
      </div>
    </div>
    <br><br>
    <div class="row">
      <div class="charts text-center">
        <div class="row"><div id="gene_composition_chr"></div></div>
      </div>
    </div>
  </div>



  <!-- Container: Test Youtube Video Embedding -->
  <div class="container">
    <br><hr><br>
    <h2>Part 2: Gene Expression</h2>
    <br>
    <div class="charts text-center">
      <iframe width="790" height="444" src="https://www.youtube.com/embed/gG7uCskUOrA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </div>


  <div class="container">
    <br><hr><br>
    <!-- <div class="row"> -->
      <!-- <h3>Within each Gene there are Exons, Introns, Coding DNA Sequences, Untranslated Regions, and Start and Stop Codons</h3> -->
      <!-- <a href="/definitions_part_3" style="font-size:22px;">Definitions for Part 3</a> -->
    <!-- </div> -->
    <div class="row">
      <h3>Select a Gene to Activate ("Express") that Gene:</h3>
      <!-- Dropdown List to Select Gene -->
      <!-- <label for="gene_dropdown">Select a Gene:</label> -->
      <select name="gene_dropdown" id="gene_dropdown" onchange="displayGene()">
        <option value = "TP53" selected>TP53</option>
        {% for gene in gene_names %}        
        <option value="{{gene}}">{{gene}}</option>
        {% endfor %}
      </select>
    </div>
  </div>


  <!-- Render Gene Browser Chart -->
  <div class="container">
    <br><hr><br>
    <div class="charts text-center">
      <div class="row"><div id="gene_components"></div></div>
    </div>
  </div>


  <!-- Render Gene Transcription Chart -->
  <div class="container">
    <br><hr><br>
    <h3>Transcription: When a Gene is activated, its DNA is transcribed into RNA</h3>
    <a href="/definitions_part_4" style="font-size:22px;">Definitions for Part 4</a>
    <div class="charts text-center">
      <div class="row"><div id="transcription"></div></div>
    </div>
  </div>


  <!-- Render Gene Splicing Chart -->
  <div class="container">
    <br><hr><br>
    <h3>Splicing: Transcribed RNA then gets spliced into mRNA</h3>
    <a href="/definitions_part_5_6_7" style="font-size:22px;">Definitions for Part 5, 6, and 7</a>

    <div class="charts text-center">
      <div class="row"><div id="splicing"></div></div><hr>
    </div>
  </div>

  <!-- Render Gene Translation Chart -->
  <div class="container">
    <br><hr><br>
    <h3>Translation: mRNA then gets translated into a sequence of Amino Acids</h3>

    <div class="charts text-center">
      <div class="row"><div id="translation"></div></div>
    </div>
  </div>


  <!-- Container for Protein Information -->
  <div class="container">
    <br><hr><br>
    <div class="row" style="width:100%; text-align: center;">
      <h3>Resulting Protein Info</h3>
    </div>
    <br>
      <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Gene Name:</h4>
        </div>
        <div class="col-9">
          <div id='gene_name'></div>
        </div>
      </div>
      <!-- <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Chromosome:</h4>
        </div>
        <div class="col-9">
          <div id='chromosome'></div>
        </div>
      </div> -->
      <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Protein Name:</h4>
        </div>
        <div class="col-9">
          <span id='protein_name' style="width:100%; word-wrap:break-word; display:inline-block;"></span>
        </div>
      </div>
      <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Protein Function:</h4>
        </div>
        <div class="col-9">
          <span id='protein_function' style="width:100%; word-wrap:break-word; display:inline-block;"></span>
        </div>
      </div>
      <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Amino Acid Count:</h4>
        </div>
        <div class="col-9">
          <div id='aa_length'></div>
        </div>
      </div>
      <div class="row">
        <br><hr><br>
        <div class="col">
          <h4>Amino Acid Sequence:</h4>
        </div>
        <div class="col-9">
          <span id='aa_seq' style="width:100%; word-wrap:break-word; display:inline-block;"></span>
        </div>
      </div>
    </div>


    <!-- Container for Amino Acid Composition Chart -->
    <div class="container">
      <br><hr><br>
      <div class="charts text-center">
        <div class="row"><div id="protein_composition"></div></div>
      </div>
    </div>


    <!-- Container for Molstar Protein Viewer -->
    <div class="container">
      <br><hr><br>
      <h3>Protein Folding: The Amino Acid Chain folds into its final 3D shape called a Protein</h3>
      <br>
      <!-- <a id="molstar" style="font-size:40px;">Click to View the 3D Structure of the Protein</a> -->
      <div class="charts text-center">
        <iframe id="molstar" title="Molstar Protein Viewer" height="1000" width="1000"></iframe>
      </div>
    </div>


    <!-- Container for Citations -->
    <div class="container">
      <br><hr>
      <h3>Sources</h3>
      <ul>
        <li>
          <div class="row">
            <div class="col-3">Human Genome Dataset:</div>
            <div class="col"><a href='https://www.gencodegenes.org/'>GENCODE Human Genome version GRCh38.p13</a></div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-3">Protein Dataset:</div>
            <div class="col"><a href='https://www.uniprot.org/'>UniProt Human Proteome (UniProtKB Reviewed Swiss-Prot)</a></div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-3">3D Protein Structures:</div>
            <div class="col"><a href='https://alphafold.ebi.ac.uk/'>AlphaFold Protein Structure Database</a></div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-3">Protein Viewer API:</div>
            <div class="col"><a href='https://molstar.org/'>Molstar Viewer</a></div>
          </div>
        </li>
        <li>
          <div class="row">
            <div class="col-3">Definitions and Images:</div>
            <div class="col"><a href='https://www.genome.gov/'>National Human Genome Research Institute</a></div>
          </div>
        </li>
      </ul>
    </div>


    <!-- Container for Authors -->
    <div class="container">
      <hr>
      <h3>Authors</h3>
      <ul>
        <li><a href='https://www.linkedin.com/in/eric-ellestad/'>Eric Ellestad</a></li>
        <li><a href='https://www.linkedin.com/in/whitney-fee-2402596b/'>Whitney Fee</a></li>
        <li><a href='https://www.linkedin.com/in/angel-ortiz-544936201/'>Angel Ortiz Nuñez</a></li>
      </ul>
    </div>


    <!-- Javascript to Render Altair Charts based on Gene Selection -->
    <script type="text/javascript">

      // Assign Tableau URL to each Embedded div
      var tableau_url_1 = "https://public.tableau.com/views/TheHumanGenomeOverview/TheHumanGenome?:language=en-US&:display_count=n&:origin=viz_share_link"
      var tableau_url_1 = tableau_url_1 + ":showVizHome=no&:embed=true"
      document.getElementById("tableau_1").src = tableau_url_1;

      var tableau_url_2 = "https://public.tableau.com/views/ChromosomeOverview/ChromosomeOverview?:language=en-US&:display_count=n&:origin=viz_share_link"
      var tableau_url_2 = tableau_url_2 + ":showVizHome=no&:embed=true"
      document.getElementById("tableau_2").src = tableau_url_2;


      function parse(url, div) {
        var opt = {
          mode: "vega-lite",
          renderer: "svg",
          actions: {export: true, source: false, editor: false}
        };

        vegaEmbed("#"+div, url, opt, function(error, result) {
          // result.view is the Vega View, url is the original Vega-Lite specification
          vegaTooltip.vegaLite(result.view, url);
        });
      }

      function displayGene() {
        var gene_name = document.getElementById("gene_dropdown").value;

        parse("/chart/gene_composition_genome/", "gene_composition_genome")
        parse("/chart/gene_composition_chr/", "gene_composition_chr")
        parse("/chart/gene_components/" + gene_name, "gene_components")
        parse("/chart/transcription/" + gene_name, "transcription")
        parse("/chart/splicing/" + gene_name, "splicing")
        parse("/chart/translation/" + gene_name, "translation")
        parse("/chart/protein_composition/" + gene_name, "protein_composition")

        var molstar_url = "/molstar/" + gene_name;
        // document.getElementById("molstar").href = molstar_url;
        document.getElementById("molstar").src = molstar_url;

        document.getElementById("gene_name").innerHTML = gene_name;

        function get_protein_info() {
          var protein_info_url = '/protein_info/' + gene_name;
          $.getJSON(protein_info_url, function(protein) {
            // document.getElementById("chromosome").innerHTML = protein.chromosome;
            document.getElementById("protein_name").innerHTML = protein.name;
            document.getElementById("protein_function").innerHTML = protein.function;
            document.getElementById("aa_seq").innerHTML = protein.aa_seq;
            document.getElementById("aa_length").innerHTML = protein.aa_length;
          });
        }
        get_protein_info()
      }
      displayGene()

    </script>

</body>
